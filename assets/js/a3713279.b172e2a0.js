"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[588],{991:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>r,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var i=a(4848),t=a(8453);const o={sidebar_position:5,title:"Deployment",description:"Astraios deployment guide"},s=void 0,l={id:"deployment",title:"Deployment",description:"Astraios deployment guide",source:"@site/docs/deployment.md",sourceDirName:".",slug:"/deployment",permalink:"/docs/deployment",draft:!1,unlisted:!1,editUrl:"https://github.com/paion-data/astraios/tree/master/docs/docs/deployment.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,title:"Deployment",description:"Astraios deployment guide"},sidebar:"tutorialSidebar",previous:{title:"Configuration",permalink:"/docs/configuration"}},r={},d=[{value:"Prepare for Production Development",id:"prepare-for-production-development",level:2},{value:"Installing Java (on Ubuntu)",id:"installing-java-on-ubuntu",level:3},{value:"Installing Maven",id:"installing-maven",level:3},{value:"Loading Data Models",id:"loading-data-models",level:3},{value:"Packaging Astraios",id:"packaging-astraios",level:3},{value:"Running the JAR Package",id:"running-the-jar-package",level:3}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["This section discusses deploying ",(0,i.jsx)(n.a,{href:"https://paion-data.github.io/astraios/",children:"Astraios"})," in production."]}),"\n",(0,i.jsx)(n.h2,{id:"prepare-for-production-development",children:"Prepare for Production Development"}),"\n",(0,i.jsx)(n.h3,{id:"installing-java-on-ubuntu",children:"Installing Java (on Ubuntu)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install openjdk-17-jdk\n"})}),"\n",(0,i.jsx)(n.p,{children:"At the end of the last command prompt, something like the below will show up:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"The following additional packages will be installed:\n  ...\nSuggested packages:\n  ...\nThe following NEW packages will be installed:\n  ...\nNeed to get 170 MB of archives.\nAfter this operation, 877 MB of additional disk space will be used.\nDo you want to continue? [Y/n]\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Enter ",(0,i.jsx)(n.code,{children:"Y"})," to complete the installation."]}),"\n",(0,i.jsx)(n.p,{children:":::"}),"\n",(0,i.jsx)(n.p,{children:"If we see something similar after typing the command with the version flag below we're good to go"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'$ java -version\nopenjdk version "17.0.11" 2024-04-16\nOpenJDK Runtime Environment (build 17.0.11+9-Ubuntu-120.04.2)\nOpenJDK 64-Bit Server VM (build 17.0.11+9-Ubuntu-120.04.2, mixed mode, sharing)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"installing-maven",children:"Installing Maven"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo apt install maven\n"})}),"\n",(0,i.jsx)(n.p,{children:"At the end of the last command prompt, something like the below will show up:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"The following additional packages will be installed:\n  ...\nSuggested packages:\n  ...\nThe following NEW packages will be installed:\n  ...\nNeed to get 9,657 kB of archives.\nAfter this operation, 12.6 MB of additional disk space will be used.\nDo you want to continue? [Y/n]\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Enter ",(0,i.jsx)(n.code,{children:"Y"})," to complete the installation."]}),"\n",(0,i.jsx)(n.p,{children:":::"}),"\n",(0,i.jsx)(n.p,{children:"If we see something similar after typing the command with the version flag below we're good to go"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'$ mvn -version\nApache Maven 3.6.3\nMaven home: /usr/share/maven\nJava version: 17.0.11, vendor: Ubuntu, runtime: /usr/lib/jvm/java-17-openjdk-amd64\nDefault locale: en_US, platform encoding: UTF-8\nOS name: "linux", version: "5.4.0-182-generic", arch: "amd64", family: "unix"\n'})}),"\n",(0,i.jsx)(n.p,{children:"In the example, Maven is obviously using the correct JDK, so there is no need to set the JAVA_HOME environment variable\nextra. However, if you want to explicitly set JAVA_HOME, or in some cases (for example, when there are multiple JDK\ninstallations) make sure Maven always uses a specific JDK 17, You can add the following lines to your shell\nconfiguration file (such as.bashrc,.zshrc, or.profile) :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64\n"})}),"\n",(0,i.jsx)(n.h3,{id:"loading-data-models",children:"Loading Data Models"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git clone git@github.com:paion-data/astraios-data-models-example.git\ncd astraios-data-models-example\nmvn clean install\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Now that we have the model installed locally, we need to get astraios to load the model through the maven configuration\nfile, add the following configuration information via ",(0,i.jsx)(n.strong,{children:"~/.m2/settings.xml"})," ~/.m2/settings.xml:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"\n          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0\n                      http://maven.apache.org/xsd/settings-1.0.0.xsd">\n\n    <profiles>\n        <profile>\n            <id>astraios-data-models</id>\n            <properties>\n                <model.package.jar.group.id>com.paiondata</model.package.jar.group.id>\n                <model.package.jar.artifact.id>astraios-data-models-example</model.package.jar.artifact.id>\n                <model.package.jar.version>1.0.0</model.package.jar.version>\n            </properties>\n        </profile>\n    </profiles>\n\n    <activeProfiles>\n        <activeProfile>astraios-data-models</activeProfile>\n    </activeProfiles>\n</settings>\n'})}),"\n",(0,i.jsx)(n.h3,{id:"packaging-astraios",children:"Packaging Astraios"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git clone git@github.com:paion-data/astraios.git\nexport MODEL_PACKAGE_NAME=com.paiondata.astraios.data.models\nexport DB_USER=YOUR_DB_USER\nexport DB_PASSWORD=YOUR_DB_PASSWORD\nexport DB_URL=YOUR_DB_URL\nexport DB_DRIVER=YOUR_DB_DRIVER\nexport DB_DIALECT=YOUR_DB_DIALECT\nmvn clean package\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://paion-data.github.io/astraios/",children:"Astraios"})," is built on ",(0,i.jsx)(n.a,{href:"https://spring.io/projects/spring-boot",children:"Springboot"})," and has a built-in web container, which we\nused maven to package into a jar file."]}),"\n",(0,i.jsx)(n.h3,{id:"running-the-jar-package",children:"Running the JAR Package"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"java -jar target/astraios-1.0-SNAPSHOT.jar\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The webservice will run on port ",(0,i.jsx)(n.strong,{children:"8080"}),", and you will be able to see the data you inserted."]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>l});var i=a(6540);const t={},o=i.createContext(t);function s(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);